(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{481:(e,t,r)=>{Promise.resolve().then(r.bind(r,2386))},2386:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var n=r(5155),o=r(9208),i=r(2115),a=r(8998),s=r(9561),c=r(1396),l=r(618),u=r(2282),d=r(6854),f=r(6046);function p(){let[e,t]=(0,i.useState)(""),[r,p]=(0,i.useState)(""),[h,m]=(0,i.useState)(""),[v,g]=(0,i.useState)(!1),x=(0,f.useRouter)(),y=async()=>{m(""),g(!0);try{let t=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})});if(!t.ok){let e=await t.json();m(e.message||"Login failed."),g(!1);return}let n=await t.json();console.log("Login API Response:",n),n.token?(o.A.set("authToken",n.token,{expires:1}),localStorage.setItem("jwt",n.token),console.log("Token saved to cookie and localStorage:",n.token),x.push("/dashboard")):m("Login response missing token.")}catch(e){console.error("Error during login:",e),m("An unexpected error occurred. Please try again.")}finally{g(!1)}};return(0,n.jsxs)(a.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",bgcolor:"#f5f5f5"},children:[(0,n.jsx)(s.A,{variant:"h4",gutterBottom:!0,children:"Log In"}),(0,n.jsxs)(a.A,{sx:{width:300},children:[h&&(0,n.jsx)(c.A,{severity:"error",sx:{mb:2},children:h}),(0,n.jsx)(l.A,{fullWidth:!0,label:"Email",variant:"outlined",margin:"normal",value:e,onChange:e=>t(e.target.value)}),(0,n.jsx)(l.A,{fullWidth:!0,label:"Password",type:"password",variant:"outlined",margin:"normal",value:r,onChange:e=>p(e.target.value)}),(0,n.jsx)(u.A,{fullWidth:!0,variant:"contained",color:"primary",sx:{mt:2},onClick:y,disabled:v,children:v?(0,n.jsx)(d.A,{size:24,sx:{color:"white"}}):"Log In"})]})]})}},6854:(e,t,r)=>{"use strict";r.d(t,{A:()=>I});var n=r(698),o=r(2115),i=r(3463),a=r(7123),s=r(1987),c=r(2710),l=r(8330),u=r(2567),d=r(7410),f=r(1628),p=r(1045),h=r(7157);function m(e){return(0,h.Ay)("MuiCircularProgress",e)}(0,p.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var v=r(5155);function g(){let e=(0,n._)(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return g=function(){return e},e}function x(){let e=(0,n._)(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"]);return x=function(){return e},e}function y(){let e=(0,n._)(["\n        animation: "," 1.4s linear infinite;\n      "]);return y=function(){return e},e}function k(){let e=(0,n._)(["\n        animation: "," 1.4s ease-in-out infinite;\n      "]);return k=function(){return e},e}let A=(0,s.i7)(g()),b=(0,s.i7)(x()),C="string"!=typeof A?(0,s.AH)(y(),A):null,w="string"!=typeof b?(0,s.AH)(k(),b):null,j=e=>{let{classes:t,variant:r,color:n,disableShrink:o}=e,i={root:["root",r,"color".concat((0,d.A)(n))],svg:["svg"],circle:["circle","circle".concat((0,d.A)(r)),o&&"circleDisableShrink"]};return(0,a.A)(i,m,t)},S=(0,c.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.variant],t["color".concat((0,d.A)(r.color))]]}})((0,l.A)(e=>{let{theme:t}=e;return{display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:C||{animation:"".concat(A," 1.4s linear infinite")}},...Object.entries(t.palette).filter((0,f.A)()).map(e=>{let[r]=e;return{props:{color:r},style:{color:(t.vars||t).palette[r].main}}})]}})),R=(0,c.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),D=(0,c.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.circle,t["circle".concat((0,d.A)(r.variant))],r.disableShrink&&t.circleDisableShrink]}})((0,l.A)(e=>{let{theme:t}=e;return{stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink},style:w||{animation:"".concat(b," 1.4s ease-in-out infinite")}}]}})),I=o.forwardRef(function(e,t){let r=(0,u.b)({props:e,name:"MuiCircularProgress"}),{className:n,color:o="primary",disableShrink:a=!1,size:s=40,style:c,thickness:l=3.6,value:d=0,variant:f="indeterminate",...p}=r,h={...r,color:o,disableShrink:a,size:s,thickness:l,value:d,variant:f},m=j(h),g={},x={},y={};if("determinate"===f){let e=2*Math.PI*((44-l)/2);g.strokeDasharray=e.toFixed(3),y["aria-valuenow"]=Math.round(d),g.strokeDashoffset="".concat(((100-d)/100*e).toFixed(3),"px"),x.transform="rotate(-90deg)"}return(0,v.jsx)(S,{className:(0,i.A)(m.root,n),style:{width:s,height:s,...x,...c},ownerState:h,ref:t,role:"progressbar",...y,...p,children:(0,v.jsx)(R,{className:m.svg,ownerState:h,viewBox:"".concat(22," ").concat(22," ").concat(44," ").concat(44),children:(0,v.jsx)(D,{className:m.circle,style:g,ownerState:h,cx:44,cy:44,r:(44-l)/2,fill:"none",strokeWidth:l})})})})},6046:(e,t,r)=>{"use strict";var n=r(6658);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},9208:(e,t,r)=>{"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{A:()=>o});var o=function e(t,r){function o(e,o,i){if("undefined"!=typeof document){"number"==typeof(i=n({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in i)i[s]&&(a+="; "+s,!0!==i[s]&&(a+="="+i[s].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+a}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var i=r[o].split("="),a=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(n[s]=t.read(a,s),e===s)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){o(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},e=>{var t=t=>e(e.s=t);e.O(0,[380,282,269,536,626,618,441,517,358],()=>t(481)),_N_E=e.O()}]);