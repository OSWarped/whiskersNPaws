(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{3118:(e,t,r)=>{Promise.resolve().then(r.bind(r,5399))},5399:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var n=r(5155),a=r(2115),i=r(6046),o=r(8998),s=r(6854),c=r(9561),l=r(5417),d=r(8562),u=r(4918),h=r(1983),p=r(4156),f=r(1396),m=r(618),x=r(2282),v=r(9208);function A(){let[e,t]=(0,a.useState)(null),[r,A]=(0,a.useState)([]),[g,j]=(0,a.useState)([]),[y,b]=(0,a.useState)(!0),[k,w]=(0,a.useState)(""),[C,S]=(0,a.useState)({name:"",type:"",breed:"",specialNeeds:""}),N=(0,i.useRouter)();(0,a.useEffect)(()=>{(async()=>{try{let e=v.A.get("authToken")||localStorage.getItem("jwt")||void 0;if(!e)throw Error("No authentication token found");let r=await fetch("/api/auth/me",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(!r.ok)throw Error("Failed to fetch user");let n=await r.json();t(n);let a=await fetch("/api/pets/me",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){let e=await a.json();A(e)}else console.error("Failed to fetch pets:",await a.json());let i=await fetch("/api/reservations",{method:"GET",headers:{Authorization:"Bearer ".concat(e)}});if(i.ok){let e=await i.json();j(e)}else console.error("Failed to fetch reservations:",await i.json())}catch(e){console.error("Error fetching data:",e),N.push("/login")}finally{b(!1)}})()},[N]);let D=e=>{S({...C,[e.target.name]:e.target.value})},P=async()=>{if(!C.name||!C.type){w("Name and type are required.");return}try{let t=v.A.get("authToken")||localStorage.getItem("jwt");if(!t){w("User not authenticated.");return}let r=await fetch("/api/pets",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({...C,userId:null==e?void 0:e.id})});if(!r.ok){let e=await r.json();w(e.message||"Failed to add pet.");return}let n=await r.json();A(e=>[...e,n]),S({name:"",type:"",breed:"",specialNeeds:""})}catch(e){console.error("Error adding pet:",e),w("An error occurred. Please try again.")}};return y?(0,n.jsx)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"},children:(0,n.jsx)(s.A,{})}):(0,n.jsxs)(o.A,{sx:{p:4},children:[(0,n.jsxs)(c.A,{variant:"h4",gutterBottom:!0,children:["Welcome, ",null==e?void 0:e.firstName," ",null==e?void 0:e.lastName,"!"]}),(0,n.jsxs)(l.Ay,{container:!0,spacing:4,children:[(0,n.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,n.jsxs)(d.A,{elevation:3,sx:{p:3},children:[(0,n.jsx)(c.A,{variant:"h5",gutterBottom:!0,children:"Your Pets"}),0===r.length?(0,n.jsx)(c.A,{children:"No pets added yet."}):(0,n.jsx)(u.A,{children:r.map(e=>(0,n.jsxs)(o.A,{children:[(0,n.jsx)(h.Ay,{children:(0,n.jsxs)(c.A,{children:[(0,n.jsx)("strong",{children:"Name:"})," ",e.name," | ",(0,n.jsx)("strong",{children:"Type:"})," ",e.type," ",e.breed?"| Breed: ".concat(e.breed):""," ",e.specialNeeds?"| Special Needs: ".concat(e.specialNeeds):""]})}),(0,n.jsx)(p.A,{})]},e.id))}),(0,n.jsxs)(o.A,{sx:{mt:3},children:[(0,n.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:"Add a Pet"}),k&&(0,n.jsx)(f.A,{severity:"error",sx:{mb:2},children:k}),(0,n.jsx)(m.A,{label:"Pet Name",name:"name",value:C.name,onChange:D,fullWidth:!0,required:!0,sx:{mb:2}}),(0,n.jsx)(m.A,{label:"Pet Type",name:"type",value:C.type,onChange:D,fullWidth:!0,required:!0,sx:{mb:2}}),(0,n.jsx)(m.A,{label:"Breed (Optional)",name:"breed",value:C.breed,onChange:D,fullWidth:!0,sx:{mb:2}}),(0,n.jsx)(m.A,{label:"Special Needs (Optional)",name:"specialNeeds",value:C.specialNeeds,onChange:D,fullWidth:!0,sx:{mb:2}}),(0,n.jsx)(x.A,{variant:"contained",color:"primary",onClick:P,children:"Add Pet"})]})]})}),(0,n.jsx)(l.Ay,{item:!0,xs:12,md:6,children:(0,n.jsxs)(d.A,{elevation:3,sx:{p:3},children:[(0,n.jsx)(c.A,{variant:"h5",gutterBottom:!0,children:"Your Reservations"}),0===g.length?(0,n.jsx)(c.A,{children:"No Reservations."}):(0,n.jsx)(u.A,{children:g.map(e=>(0,n.jsxs)(o.A,{children:[(0,n.jsx)(h.Ay,{children:(0,n.jsxs)(c.A,{children:[(0,n.jsx)("strong",{children:"Dates:"})," ",new Date(e.startDate).toLocaleDateString()," -"," ",new Date(e.endDate).toLocaleDateString()," |"," ",(0,n.jsx)("strong",{children:"Status:"})," ",e.status," | ",(0,n.jsx)("strong",{children:"Total Price:"})," ","$",e.totalPrice.toFixed(2)]})}),e.pets&&(0,n.jsx)(h.Ay,{children:(0,n.jsxs)(c.A,{children:[(0,n.jsx)("strong",{children:"Pets:"})," ",e.pets.map(e=>"".concat(e.name," (").concat(e.type,")")).join(", ")]})}),(0,n.jsx)(p.A,{})]},e.id))}),(0,n.jsx)(x.A,{variant:"contained",color:"primary",href:"/calendar",sx:{mt:2},children:"Add New Reservation"})]})})]})]})}},6854:(e,t,r)=>{"use strict";r.d(t,{A:()=>P});var n=r(698),a=r(2115),i=r(3463),o=r(7123),s=r(1987),c=r(2710),l=r(8330),d=r(2567),u=r(7410),h=r(1628),p=r(1045),f=r(7157);function m(e){return(0,f.Ay)("MuiCircularProgress",e)}(0,p.A)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var x=r(5155);function v(){let e=(0,n._)(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return v=function(){return e},e}function A(){let e=(0,n._)(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"]);return A=function(){return e},e}function g(){let e=(0,n._)(["\n        animation: "," 1.4s linear infinite;\n      "]);return g=function(){return e},e}function j(){let e=(0,n._)(["\n        animation: "," 1.4s ease-in-out infinite;\n      "]);return j=function(){return e},e}let y=(0,s.i7)(v()),b=(0,s.i7)(A()),k="string"!=typeof y?(0,s.AH)(g(),y):null,w="string"!=typeof b?(0,s.AH)(j(),b):null,C=e=>{let{classes:t,variant:r,color:n,disableShrink:a}=e,i={root:["root",r,"color".concat((0,u.A)(n))],svg:["svg"],circle:["circle","circle".concat((0,u.A)(r)),a&&"circleDisableShrink"]};return(0,o.A)(i,m,t)},S=(0,c.Ay)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,t[r.variant],t["color".concat((0,u.A)(r.color))]]}})((0,l.A)(e=>{let{theme:t}=e;return{display:"inline-block",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("transform")}},{props:{variant:"indeterminate"},style:k||{animation:"".concat(y," 1.4s linear infinite")}},...Object.entries(t.palette).filter((0,h.A)()).map(e=>{let[r]=e;return{props:{color:r},style:{color:(t.vars||t).palette[r].main}}})]}})),N=(0,c.Ay)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),D=(0,c.Ay)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.circle,t["circle".concat((0,u.A)(r.variant))],r.disableShrink&&t.circleDisableShrink]}})((0,l.A)(e=>{let{theme:t}=e;return{stroke:"currentColor",variants:[{props:{variant:"determinate"},style:{transition:t.transitions.create("stroke-dashoffset")}},{props:{variant:"indeterminate"},style:{strokeDasharray:"80px, 200px",strokeDashoffset:0}},{props:e=>{let{ownerState:t}=e;return"indeterminate"===t.variant&&!t.disableShrink},style:w||{animation:"".concat(b," 1.4s ease-in-out infinite")}}]}})),P=a.forwardRef(function(e,t){let r=(0,d.b)({props:e,name:"MuiCircularProgress"}),{className:n,color:a="primary",disableShrink:o=!1,size:s=40,style:c,thickness:l=3.6,value:u=0,variant:h="indeterminate",...p}=r,f={...r,color:a,disableShrink:o,size:s,thickness:l,value:u,variant:h},m=C(f),v={},A={},g={};if("determinate"===h){let e=2*Math.PI*((44-l)/2);v.strokeDasharray=e.toFixed(3),g["aria-valuenow"]=Math.round(u),v.strokeDashoffset="".concat(((100-u)/100*e).toFixed(3),"px"),A.transform="rotate(-90deg)"}return(0,x.jsx)(S,{className:(0,i.A)(m.root,n),style:{width:s,height:s,...A,...c},ownerState:f,ref:t,role:"progressbar",...g,...p,children:(0,x.jsx)(N,{className:m.svg,ownerState:f,viewBox:"".concat(22," ").concat(22," ").concat(44," ").concat(44),children:(0,x.jsx)(D,{className:m.circle,style:v,ownerState:f,cx:44,cy:44,r:(44-l)/2,fill:"none",strokeWidth:l})})})})},6046:(e,t,r)=>{"use strict";var n=r(6658);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},9208:(e,t,r)=>{"use strict";function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{A:()=>a});var a=function e(t,r){function a(e,a,i){if("undefined"!=typeof document){"number"==typeof(i=n({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var s in i)i[s]&&(o+="; "+s,!0!==i[s]&&(o+="="+i[s].split(";")[0]));return document.cookie=e+"="+t.write(a,e)+o}}return Object.create({set:a,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},a=0;a<r.length;a++){var i=r[a].split("="),o=i.slice(1).join("=");try{var s=decodeURIComponent(i[0]);if(n[s]=t.read(o,s),e===s)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){a(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},e=>{var t=t=>e(e.s=t);e.O(0,[380,282,269,536,626,618,417,905,441,517,358],()=>t(3118)),_N_E=e.O()}]);