{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Users/blakemilam/Projects/whiskersNPaws/app/login/page.tsx"],"sourcesContent":["'use client';\nimport Cookies from 'js-cookie'; // Ensure you have this installed\nimport React, { useState } from 'react';\nimport { Box, TextField, Button, Typography, Alert, CircularProgress } from '@mui/material';\nimport { useRouter } from 'next/navigation';\n\nexport default function LoginPage() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n\n  const router = useRouter();\n\n  const handleLogin = async () => {\n    setError('');\n    setLoading(true);\n  \n    try {\n      const response = await fetch('/api/login', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email, password }),\n      });\n  \n      if (!response.ok) {\n        const data = await response.json();\n        setError(data.message || 'Login failed.');\n        setLoading(false);\n        return;\n      }\n  \n      const data = await response.json();\n      console.log('Login API Response:', data);\n  \n      if (data.token) {\n        // Store the token in a cookie\n        Cookies.set('authToken', data.token, { expires: 1 }); // Expires in 1 day\n  \n        // Store the token in localStorage as a fallback\n        localStorage.setItem('jwt', data.token);\n  \n        console.log('Token saved to cookie and localStorage:', data.token);\n\n        // After login/logout\n        window.dispatchEvent(new Event('authChanged'));     \n  \n        // Redirect to the dashboard\n        router.push('/dashboard');\n      } else {\n        setError('Login response missing token.');\n      }\n    } catch (err) {\n      console.error('Error during login:', err);\n      setError('An unexpected error occurred. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  \n\n  return (\n    <Box\n      sx={{\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        height: '100vh',\n        bgcolor: '#f5f5f5',\n      }}\n    >\n      <Typography variant=\"h4\" gutterBottom>\n        Log In\n      </Typography>\n      <Box sx={{ width: 300 }}>\n        {error && <Alert severity=\"error\" sx={{ mb: 2 }}>{error}</Alert>}\n        <TextField\n          fullWidth\n          label=\"Email\"\n          variant=\"outlined\"\n          margin=\"normal\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n        />\n        <TextField\n          fullWidth\n          label=\"Password\"\n          type=\"password\"\n          variant=\"outlined\"\n          margin=\"normal\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n        />\n        <Button\n          fullWidth\n          variant=\"contained\"\n          color=\"primary\"\n          sx={{ mt: 2 }}\n          onClick={handleLogin}\n          disabled={loading}\n        >\n          {loading ? <CircularProgress size={24} sx={{ color: 'white' }} /> : 'Log In'}\n        </Button>\n      </Box>\n    </Box>\n  );\n}\n"],"names":[],"mappings":";;;;AACA,gQAAiC,iCAAiC;AAClE;AAEA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHA;;;;;;AAMe,SAAS;IACtB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,MAAM,cAAc;QAClB,SAAS;QACT,WAAW;QAEX,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,cAAc;gBACzC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAO;gBAAS;YACzC;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,SAAS,KAAK,OAAO,IAAI;gBACzB,WAAW;gBACX;YACF;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,QAAQ,GAAG,CAAC,uBAAuB;YAEnC,IAAI,KAAK,KAAK,EAAE;gBACd,8BAA8B;gBAC9B,qJAAA,CAAA,UAAO,CAAC,GAAG,CAAC,aAAa,KAAK,KAAK,EAAE;oBAAE,SAAS;gBAAE,IAAI,mBAAmB;gBAEzE,gDAAgD;gBAChD,aAAa,OAAO,CAAC,OAAO,KAAK,KAAK;gBAEtC,QAAQ,GAAG,CAAC,2CAA2C,KAAK,KAAK;gBAEjE,qBAAqB;gBACrB,OAAO,aAAa,CAAC,IAAI,MAAM;gBAE/B,4BAA4B;gBAC5B,OAAO,IAAI,CAAC;YACd,OAAO;gBACL,SAAS;YACX;QACF,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,uBAAuB;YACrC,SAAS;QACX,SAAU;YACR,WAAW;QACb;IACF;IAIA,qBACE,8OAAC,iLAAA,CAAA,MAAG;QACF,IAAI;YACF,SAAS;YACT,eAAe;YACf,YAAY;YACZ,gBAAgB;YAChB,QAAQ;YACR,SAAS;QACX;;0BAEA,8OAAC,sMAAA,CAAA,aAAU;gBAAC,SAAQ;gBAAK,YAAY;0BAAC;;;;;;0BAGtC,8OAAC,iLAAA,CAAA,MAAG;gBAAC,IAAI;oBAAE,OAAO;gBAAI;;oBACnB,uBAAS,8OAAC,uLAAA,CAAA,QAAK;wBAAC,UAAS;wBAAQ,IAAI;4BAAE,IAAI;wBAAE;kCAAI;;;;;;kCAClD,8OAAC,mMAAA,CAAA,YAAS;wBACR,SAAS;wBACT,OAAM;wBACN,SAAQ;wBACR,QAAO;wBACP,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;kCAE1C,8OAAC,mMAAA,CAAA,YAAS;wBACR,SAAS;wBACT,OAAM;wBACN,MAAK;wBACL,SAAQ;wBACR,QAAO;wBACP,OAAO;wBACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;kCAE7C,8OAAC,0LAAA,CAAA,SAAM;wBACL,SAAS;wBACT,SAAQ;wBACR,OAAM;wBACN,IAAI;4BAAE,IAAI;wBAAE;wBACZ,SAAS;wBACT,UAAU;kCAET,wBAAU,8OAAC,wNAAA,CAAA,mBAAgB;4BAAC,MAAM;4BAAI,IAAI;gCAAE,OAAO;4BAAQ;;;;;mCAAQ;;;;;;;;;;;;;;;;;;AAK9E"}},
    {"offset": {"line": 197, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}